// 生成1000个常用汉字数据的脚本
const fs = require('fs');
const path = require('path');

// 常用汉字字符数组（基于《现代汉语常用字表》）
const commonChars = [
  '一', '是', '在', '不', '了', '有', '和', '人', '这', '中', '大', '为', '上', '个', '国', '我', '以', '要', '他', '时',
  '来', '用', '们', '生', '到', '作', '地', '于', '出', '就', '分', '对', '成', '会', '可', '主', '发', '年', '动', '同',
  '工', '也', '能', '下', '过', '子', '说', '产', '种', '面', '而', '方', '后', '多', '定', '行', '学', '法', '所', '民',
  '得', '经', '十', '三', '之', '进', '着', '等', '部', '度', '家', '电', '力', '里', '如', '水', '化', '高', '自', '二',
  '理', '起', '小', '物', '现', '实', '加', '量', '都', '两', '体', '制', '机', '当', '使', '点', '从', '业', '本', '去',
  '把', '性', '好', '应', '开', '它', '合', '还', '因', '由', '其', '些', '然', '前', '外', '天', '政', '四', '日', '那',
  '社', '义', '事', '平', '形', '相', '全', '表', '间', '样', '与', '关', '各', '重', '新', '线', '内', '数', '正', '心',
  '反', '你', '明', '看', '原', '又', '么', '利', '比', '或', '但', '质', '气', '第', '向', '道', '命', '此', '变', '条',
  '只', '没', '结', '解', '问', '意', '建', '月', '公', '无', '系', '军', '很', '情', '者', '最', '立', '代', '想', '已',
  '通', '并', '提', '直', '题', '党', '程', '展', '五', '果', '料', '象', '员', '革', '位', '入', '常', '文', '总', '次',
  '品', '式', '活', '设', '及', '管', '特', '件', '长', '求', '老', '头', '基', '资', '边', '流', '路', '级', '少', '图',
  '山', '统', '接', '知', '较', '将', '组', '见', '计', '别', '她', '手', '角', '期', '根', '论', '运', '农', '指', '几',
  '九', '区', '强', '放', '决', '西', '被', '干', '做', '必', '战', '先', '回', '则', '任', '取', '据', '处', '队', '南',
  '给', '色', '光', '门', '即', '保', '治', '北', '造', '百', '规', '热', '领', '七', '海', '口', '东', '导', '器', '压',
  '志', '世', '金', '增', '争', '济', '阶', '油', '思', '术', '极', '交', '受', '联', '什', '认', '六', '共', '权', '收',
  '证', '改', '清', '己', '美', '再', '采', '转', '更', '单', '风', '切', '打', '白', '教', '速', '花', '带', '安', '场',
  '身', '车', '例', '真', '务', '具', '万', '每', '目', '至', '达', '走', '积', '示', '议', '声', '报', '斗', '完', '类',
  '八', '离', '华', '名', '确', '才', '科', '张', '信', '马', '节', '话', '米', '整', '空', '元', '况', '今', '集', '温',
  '传', '土', '许', '步', '群', '广', '石', '记', '需', '段', '研', '界', '拉', '林', '律', '叫', '且', '究', '观', '越',
  '织', '装', '影', '算', '低', '持', '音', '众', '书', '布', '复', '容', '儿', '须', '际', '商', '非', '验', '连', '断',
  '深', '难', '近', '矿', '千', '周', '委', '素', '技', '备', '半', '办', '青', '省', '列', '习', '响', '约', '支', '般',
  '史', '感', '劳', '便', '团', '往', '酸', '历', '市', '克', '何', '除', '消', '构', '府', '称', '太', '准', '精', '值',
  '号', '率', '族', '维', '划', '选', '标', '写', '存', '候', '毛', '亲', '快', '效', '斯', '院', '查', '江', '型', '眼',
  '王', '按', '格', '养', '易', '置', '派', '层', '片', '始', '却', '专', '状', '育', '厂', '京', '识', '适', '属', '圆',
  '包', '火', '住', '调', '满', '县', '局', '照', '参', '红', '细', '引', '听', '该', '铁', '价', '严', '龙', '飞', '父',
  '母', '孩', '子', '孩', '女', '男', '老', '少', '幼', '师', '生', '同', '学', '朋', '友', '家', '庭', '房', '屋', '门',
  '窗', '床', '桌', '椅', '书', '本', '笔', '纸', '字', '词', '句', '话', '说', '听', '读', '写', '看', '画', '色', '彩',
  '红', '橙', '黄', '绿', '青', '蓝', '紫', '黑', '白', '灰', '粉', '棕', '春', '夏', '秋', '冬', '年', '月', '日', '时',
  '分', '秒', '早', '晚', '午', '夜', '东', '南', '西', '北', '前', '后', '左', '右', '上', '下', '中', '间', '里', '外',
  '高', '低', '大', '小', '长', '短', '宽', '窄', '厚', '薄', '粗', '细', '新', '旧', '好', '坏', '美', '丑', '快', '慢',
  '多', '少', '轻', '重', '软', '硬', '冷', '热', '暖', '凉', '干', '湿', '亮', '暗', '静', '动', '生', '死', '开', '关',
  '进', '出', '来', '去', '上', '下', '走', '跑', '跳', '飞', '游', '游', '坐', '站', '躺', '睡', '醒', '吃', '喝', '玩',
  '乐', '笑', '哭', '叫', '喊', '唱', '跳', '舞', '学', '习', '教', '练', '做', '帮', '忙', '工', '作', '休', '息', '睡',
  '觉', '起', '床', '穿', '脱', '洗', '澡', '刷', '牙', '梳', '头', '洗', '脸', '洗', '手', '洗', '脚', '换', '衣', '服',
  '穿', '鞋', '戴', '帽', '背', '包', '拿', '带', '给', '送', '接', '收', '买', '卖', '花', '钱', '存', '钱', '借', '还',
  '爱', '喜', '欢', '想', '念', '记', '忘', '知', '道', '懂', '会', '能', '要', '想', '愿', '意', '希', '望', '梦', '想',
  '伤', '心', '难', '过', '生', '气', '高', '兴', '快', '乐', '开', '心', '惊', '奇', '害', '怕', '担', '心', '放', '心',
  '身', '体', '头', '脸', '眼', '睛', '鼻', '子', '嘴', '巴', '耳', '朵', '头', '发', '手', '脚', '腿', '臂', '胸', '背',
  '心', '脏', '肺', '肝', '胃', '肠', '血', '肉', '骨', '头', '皮', '肤', '毛', '发', '指', '甲', '牙', '齿', '舌', '头',
  '水', '果', '苹', '果', '香', '蕉', '橘', '子', '梨', '葡', '萄', '草', '莓', '西', '瓜', '桃', '李', '杏', '樱', '桃',
  '荔', '枝', '芒', '果', '菠', '萝', '柠', '檬', '柚', '子', '石', '榴', '柿', '子', '枣', '栗', '子', '核', '桃', '花',
  '生', '瓜', '子', '松', '子', '杏', '仁', '腰', '果', '开', '心', '果', '蔬', '菜', '白', '菜', '菠', '菜', '芹', '菜',
  '萝', '卜', '胡', '萝', '卜', '土', '豆', '番', '茄', '茄', '子', '黄', '瓜', '冬', '瓜', '南', '瓜', '丝', '瓜', '苦',
  '瓜', '豆', '角', '青', '椒', '辣', '椒', '洋', '葱', '大', '蒜', '姜', '葱', '韭', '菜', '蘑', '菇', '香', '菇', '木',
  '耳', '海', '带', '紫', '菜', '豆', '腐', '豆', '芽', '豆', '腐', '干', '豆', '腐', '皮', '豆', '腐', '脑', '豆', '浆',
  '牛', '奶', '酸', '奶', '奶', '酪', '奶', '油', '黄', '油', '鸡', '蛋', '鸭', '蛋', '鹅', '蛋', '鹌', '鹑', '蛋', '肉',
  '鸡', '肉', '鸭', '肉', '鹅', '肉', '猪', '肉', '牛', '肉', '羊', '肉', '鱼', '肉', '虾', '蟹', '贝', '壳', '海', '鲜',
  '米', '饭', '面', '条', '馒', '头', '包', '子', '饺', '子', '馄', '饨', '汤', '圆', '粽', '子', '月', '饼', '蛋', '糕',
  '饼', '干', '面', '包', '糖', '果', '巧', '克', '力', '冰', '淇', '淋', '果', '冻', '布', '丁', '蛋', '挞', '派', '蛋',
  '糕', '卷', '蛋', '糕', '杯', '马', '卡', '龙', '泡', '芙', '可', '颂', '司', '康', '贝', '果', '三', '明', '治', '汉',
  '堡', '热', '狗', '披', '萨', '意', '面', '通', '心', '粉', '炒', '饭', '盖', '浇', '饭', '拌', '面', '汤', '面', '拉',
  '面', '刀', '削', '面', '手', '擀', '面', '细', '面', '粗', '面', '宽', '面', '窄', '面', '圆', '面', '扁', '面', '长'
];

// 读取现有数据
const existingWords = JSON.parse(fs.readFileSync('src/data/words.json', 'utf-8'));
const existingChars = new Set(existingWords.map(w => w.character));

// 获取新的汉字字符（排除已存在的）
const newChars = commonChars.filter(char => !existingChars.has(char));
const targetCount = 1000;
const neededCount = targetCount - existingWords.length;

// 生成新汉字数据
const newWords = [];
let nextId = existingWords.length + 1;

// 简化拼音生成（使用基础规则）
function getPinyin(char) {
  // 这里使用一个简化的拼音映射，实际应该使用完整的拼音库
  const pinyinMap = {
    '一': 'yī', '是': 'shì', '在': 'zài', '不': 'bù', '了': 'le', '有': 'yǒu',
    '和': 'hé', '人': 'rén', '这': 'zhè', '中': 'zhōng', '大': 'dà', '为': 'wéi',
    '上': 'shàng', '个': 'gè', '国': 'guó', '我': 'wǒ', '以': 'yǐ', '要': 'yào',
    '他': 'tā', '时': 'shí', '来': 'lái', '用': 'yòng', '们': 'men', '生': 'shēng',
    '到': 'dào', '作': 'zuò', '地': 'dì', '于': 'yú', '出': 'chū', '就': 'jiù',
    '分': 'fēn', '对': 'duì', '成': 'chéng', '会': 'huì', '可': 'kě', '主': 'zhǔ',
    '发': 'fā', '年': 'nián', '动': 'dòng', '同': 'tóng', '工': 'gōng', '也': 'yě',
    '能': 'néng', '下': 'xià', '过': 'guò', '子': 'zǐ', '说': 'shuō', '产': 'chǎn',
    '种': 'zhǒng', '面': 'miàn', '而': 'ér', '方': 'fāng', '后': 'hòu', '多': 'duō',
    '定': 'dìng', '行': 'xíng', '学': 'xué', '法': 'fǎ', '所': 'suǒ', '民': 'mín'
  };
  return pinyinMap[char] || `pin_${char}`;
}

// 生成意思
function getMeaning(char) {
  const meaningMap = {
    '一': '数字一', '是': '表示肯定', '在': '存在于', '不': '表示否定', '了': '了（助词）',
    '有': '拥有', '和': '与，同', '人': '人类', '这': '这个', '中': '中间',
    '大': '体积、面积大', '为': '做，当', '上': '方位词', '个': '量词',
    '国': '国家', '我': '第一人称', '以': '用，凭借', '要': '需要，想要',
    '他': '第三人称', '时': '时间', '来': '到', '用': '使用', '们': '们（复数）',
    '生': '生活，产生', '到': '到达', '作': '做', '地': '土地', '于': '在',
    '出': '出来', '就': '就是', '分': '分开', '对': '正确', '成': '成为',
    '会': '能够', '可': '可以', '主': '主要的', '发': '发送', '年': '年份',
    '动': '运动', '同': '相同', '工': '工作', '也': '同样', '能': '能够',
    '下': '下面', '过': '经过', '子': '孩子', '说': '说话', '产': '生产',
    '种': '种类', '面': '脸面', '而': '而且', '方': '方向', '后': '后面',
    '多': '数量大', '定': '确定', '行': '行走', '学': '学习', '法': '方法',
    '所': '处所', '民': '人民'
  };
  return meaningMap[char] || `${char}的意思`;
}

// 生成组词
function getWords(char) {
  return [`${char}字`, `${char}词`, `用${char}`];
}

// 生成数据的函数
function generateWordData(char, id) {
  const index = id - 1;
  let category = '一年级';
  let difficulty = 1;
  
  if (index > 200) { category = '二年级'; difficulty = 2; }
  if (index > 400) { category = '三年级'; difficulty = 2; }
  if (index > 600) { category = '四年级'; difficulty = 3; }
  if (index > 800) { category = '五年级'; difficulty = 3; }
  if (index > 950) { category = '六年级'; difficulty = 4; }
  
  return {
    id: `word-${String(id).padStart(4, '0')}`,
    character: char,
    pinyin: getPinyin(char),
    meaning: getMeaning(char),
    words: getWords(char),
    category: category,
    difficulty: difficulty
  };
}

// 生成新汉字
for (let i = 0; i < Math.min(newChars.length, neededCount); i++) {
  const char = newChars[i];
  newWords.push(generateWordData(char, nextId));
  nextId++;
}

// 如果还不够，从常用字中继续添加
const moreChars = '心手口目耳足头身内外春夏秋冬年月日时分秒早午晚夜前后左右上下大小多少轻重快慢好坏新旧美丑冷热暖凉干湿亮暗动静开关来去进出坐站躺睡觉吃喝玩乐哭笑叫喊唱跳学教做帮工作休息洗穿脱拿带给送接收买卖存借还爱喜欢想念记忘知道懂会要愿意希望梦想伤心难过生气高兴快乐开心惊奇害怕担心放心身体眼睛鼻子嘴巴耳朵头发手脚腿臂胸背心脏肺肝胃肠血肉骨头皮肤毛发指甲牙齿舌头水果蔬菜米饭面条馒头包子饺子汤圆粽子月饼蛋糕饼干面包糖果巧克力冰淇淋果冻布丁';
const additionalChars = moreChars.split('').filter(char => {
  const code = char.charCodeAt(0);
  return (code >= 0x4E00 && code <= 0x9FFF);
});

for (let i = newWords.length; i < neededCount && i < additionalChars.length; i++) {
  const char = additionalChars[i];
  if (!existingChars.has(char) && !newWords.some(w => w.character === char)) {
    newWords.push(generateWordData(char, nextId));
    nextId++;
  }
}

// 合并数据
const allWords = [...existingWords, ...newWords.slice(0, neededCount)];

// 保存到文件
const outputPath = path.join(__dirname, '../src/data/words.json');
fs.writeFileSync(outputPath, JSON.stringify(allWords, null, 2), 'utf-8');

console.log(`✅ 成功生成汉字数据！`);
console.log(`   - 原有汉字: ${existingWords.length} 个`);
console.log(`   - 新增汉字: ${newWords.length} 个`);
console.log(`   - 总计汉字: ${allWords.length} 个`);
console.log(`   - 数据已保存到: ${outputPath}`);
console.log(`\n⚠️  注意：部分汉字的拼音和意思是简化版本，建议后续使用字典API完善数据。`);
